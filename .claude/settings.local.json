{
  "permissions": {
    "allow": [
      "Bash(docker:*)",
      "Bash(docker-compose:*)",
      "Bash(npm install)",
      "Bash(sudo chown:*)",
      "Bash(mkdir:*)",
      "Bash(curl:*)",
      "Bash(ping:*)",
      "WebFetch(domain:robin-stocks.readthedocs.io)",
      "Bash(find:*)",
      "Bash(npm run build:*)",
      "Bash(ls:*)",
      "Bash(grep:*)",
      "Bash(python -m pytest tests/test_options_calculations.py -v)",
      "Bash(python3 -m pytest tests/test_options_calculations.py -v)",
      "Bash(npx next:*)",
      "Bash(python -m pytest tests/test_rolled_options.py -v)",
      "Bash(python3 -m pytest tests/test_rolled_options.py -v)",
      "Bash(python3 -m pip install:*)",
      "Bash(export DATABASE_URL=\"sqlite:///test.db\")",
      "Bash(python3 -m pytest tests/test_rolled_options.py::TestRolledOptionsChainIdentification::test_roll_pair_identification -v)",
      "Bash(python3 -m pytest tests/test_rolled_options.py::TestRolledOptionsChainIdentification::test_chain_identification_from_orders -v)",
      "Bash(python3:*)",
      "Bash(mv:*)",
      "Bash(python -m pytest tests/test_rolled_options_integration.py -v)",
      "Bash(cat:*)",
      "Bash(rm:*)",
      "Bash(npm run dev:*)",
      "Bash(open:*)",
      "Bash(npm run lint)",
      "Bash(npm run type-check:*)",
      "Bash(pkill:*)",
      "Bash(true)",
      "Bash(kill:*)",
      "Bash(cd /Users/abhishek/tradeanalytics-v2/backend)",
      "Bash(python update_raw_data.py)",
      "Bash(docker exec tradeanalytics_backend python -c \"\nimport json\nimport sys\nsys.path.append(''/app'')\nfrom app.core.database import get_db\nfrom app.models.options_order import OptionsOrder\nfrom sqlalchemy import select\nimport asyncio\n\nasync def check_orders():\n    async for db in get_db():\n        stmt = select(OptionsOrder.raw_data).limit(3)\n        result = await db.execute(stmt)\n        orders = result.fetchall()\n        \n        for i, (raw_data,) in enumerate(orders):\n            print(f''Order {i+1}:'')\n            if raw_data and isinstance(raw_data, dict):\n                print(f''Keys: {list(raw_data.keys())[:10]}...'')  # Show first 10 keys\n                if ''form_source'' in raw_data:\n                    print(f''form_source: {raw_data[\"\"form_source\"\"]}'')\n                else:\n                    print(''form_source: NOT FOUND'')\n                # Check for other potential roll indicators\n                for key in [''source'', ''opening_strategy'', ''closing_strategy'', ''type'']:\n                    if key in raw_data:\n                        print(f''{key}: {raw_data[key]}'')\n            print(''---'')\n        break\n\nasyncio.run(check_orders())\n\")",
      "Bash(docker exec tradeanalytics_postgres psql -U postgres -d tradeanalytics -c \"SELECT raw_data->''form_source'' as form_source FROM options_orders WHERE raw_data ? ''form_source'' LIMIT 5;\")",
      "Bash(cp:*)",
      "Bash(pip install:*)",
      "Bash(for i in 001 002 003 004 005)",
      "Bash(do)",
      "Bash(echo:*)",
      "Bash(done)",
      "Bash(timeout 30 curl -X GET \"http://localhost:8000/api/v1/rolled-options/chains?limit=5\")",
      "Bash(timeout 10 curl -X GET \"http://localhost:8000/api/v1/rolled-options-v2/chains?limit=10\")",
      "Bash(jq:*)",
      "Bash(python:*)",
      "Bash(PYTHONPATH=/Users/abhishek/tradeanalytics-v2/backend python -c \"\nimport asyncio\nimport json\nimport os\nfrom sqlalchemy.ext.asyncio import create_async_engine, AsyncSession\nfrom sqlalchemy.orm import sessionmaker\nfrom sqlalchemy import select\nfrom app.models.rolled_options_chain import RolledOptionsChain\n\n# Mock environment for testing\nos.environ[''DATABASE_URL''] = ''postgresql+asyncpg://postgres:password@localhost:5432/tradeanalytics''\nos.environ[''SECRET_KEY''] = ''test-key''\n\nasync def check_chains():\n    engine = create_async_engine(''postgresql+asyncpg://postgres:password@localhost:5432/tradeanalytics'')\n    async_session = sessionmaker(engine, class_=AsyncSession, expire_on_commit=False)\n    \n    async with async_session() as session:\n        result = await session.execute(\n            select(RolledOptionsChain)\n            .where(RolledOptionsChain.user_id == ''123e4567-e89b-12d3-a456-426614174000'')\n            .limit(5)\n        )\n        chains = result.scalars().all()\n        \n        print(f''Found {len(chains)} chains in database'')\n        \n        for i, chain in enumerate(chains):\n            print(f''\\nChain {i+1}: {chain.underlying_symbol}'')\n            print(f''Chain ID: {chain.chain_id}'')\n            print(f''Status: {chain.status}'')\n            print(f''Total orders: {chain.total_orders}'')\n            \n            # Check chain_data structure\n            chain_data = chain.chain_data or {}\n            orders = chain_data.get(''orders'', [])\n            print(f''Orders in chain_data: {len(orders)}'')\n            \n            if orders:\n                latest_order = orders[-1]\n                print(f''Latest order keys: {list(latest_order.keys())}'')\n                print(f''Latest order ID: {latest_order.get(\"\"order_id\"\")}'')\n                print(f''Latest order position_effect: {latest_order.get(\"\"position_effect\"\")}'')\n                print(f''Latest order strike: {latest_order.get(\"\"strike_price\"\")}'')\n                print(f''Latest order type: {latest_order.get(\"\"option_type\"\")}'')\n                print(f''Latest order expiry: {latest_order.get(\"\"expiration_date\"\")}'')\n                print(f''Latest order side: {latest_order.get(\"\"side\"\")}'')\n                print(f''Latest order legs: {latest_order.get(\"\"legs\"\", [])}'')\n                \n                # Check if it has roll_details\n                if ''roll_details'' in latest_order:\n                    print(f''Roll details: {latest_order[\"\"roll_details\"\"]}'')\n\nasyncio.run(check_chains())\n\")",
      "Bash(psql:*)",
      "Bash(PYTHONPATH=/Users/abhishek/tradeanalytics-v2/backend DATABASE_URL=postgresql+asyncpg://postgres:password@localhost:5432/tradeanalytics python regenerate_enhanced_chains.py)",
      "Bash(DATABASE_URL=\"postgresql+asyncpg://postgres:password@localhost:5432/tradeanalytics\" REDIS_URL=\"redis://localhost:6379/0\" SUPABASE_URL=\"dummy\" SUPABASE_ANON_KEY=\"dummy\" JWT_SECRET=\"dummy\" python regenerate_enhanced_chains.py)",
      "Bash(DATABASE_URL=\"postgresql+asyncpg://postgres:postgres@localhost:5432/tradeanalytics\" REDIS_URL=\"redis://localhost:6379/0\" SUPABASE_URL=\"dummy\" SUPABASE_ANON_KEY=\"dummy\" JWT_SECRET=\"dummy\" python regenerate_enhanced_chains.py)",
      "Bash(pip show:*)",
      "Bash(DATABASE_URL=\"postgresql://postgres:postgres@localhost:5432/tradeanalytics\" REDIS_URL=\"redis://localhost:6379/0\" SUPABASE_URL=\"dummy\" SUPABASE_ANON_KEY=\"dummy\" JWT_SECRET=\"dummy\" python regenerate_enhanced_chains_hybrid.py)",
      "Bash(DATABASE_URL=\"postgresql+asyncpg://postgres:postgres@localhost:5432/tradeanalytics\" REDIS_URL=\"redis://localhost:6379/0\" SUPABASE_URL=\"dummy\" SUPABASE_ANON_KEY=\"dummy\" JWT_SECRET=\"dummy\" python regenerate_enhanced_chains_hybrid.py)",
      "Bash(DATABASE_URL=\"postgresql+asyncpg://postgres:postgres@localhost:5432/tradeanalytics\" REDIS_URL=\"redis://localhost:6379/0\" SUPABASE_URL=\"dummy\" SUPABASE_ANON_KEY=\"dummy\" JWT_SECRET=\"dummy\" python test_simple_insert.py)",
      "Bash(DATABASE_URL=\"postgresql+asyncpg://postgres:postgres@localhost:5432/tradeanalytics\" REDIS_URL=\"redis://localhost:6379/0\" SUPABASE_URL=\"dummy\" SUPABASE_ANON_KEY=\"dummy\" JWT_SECRET=\"dummy\" python regenerate_enhanced_chains_debug.py)",
      "Bash(chmod:*)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(git init:*)",
      "Bash(PYTHONPATH:*)",
      "Bash(npm test)",
      "Bash(npx jest:*)",
      "Bash(npm install:*)",
      "Bash(npx playwright test:*)",
      "Bash(npx playwright:*)"
    ],
    "deny": []
  }
}